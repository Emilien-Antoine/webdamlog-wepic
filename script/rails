#!/usr/bin/env ruby
# This command will automatically be run when you run "rails" with Rails 3 gems installed from the root of your application.

#The PORT environment variable lets the port on which the rails server is booted accessible from everywhere,
#including route parameters. Ports used for wlinstances are expected to have values above 9999.
require 'lib/wl_setup'

ENV['IS_MANAGER']='true'
if ARGV.include?("-b")
  ENV['IS_MANAGER']='false'
  puts "Server is a WLInstance."
end

if ENV['IS_MANAGER']=='true'
  puts "Server is a WLInstance Manager."
  dbsetup(:sqlite3)
end

APP_PATH = File.expand_path('../../config/application',  __FILE__)
require File.expand_path('../../config/boot',  __FILE__)
require 'rails/commands'
